admin_password: change_pw_for_live
modalities:
  ct:
    label: CT
    nav_color: '#1a5276'
    hover_color: '#153f5b'
    background_color: '#e6f2fa'
    factor: 1.0
  mr:
    label: MR
    nav_color: '#777777'
    hover_color: '#555555'
    background_color: '#f9f9f9'
    factor: 1.2
  xray:
    label: XRAY
    nav_color: '#239b56'
    hover_color: '#1d7a48'
    background_color: '#e0f2e9'
    factor: 0.33
modality_fallbacks:
  xray:
    - - ct
      - mr
  ct:
    - mr
  mr: []
skills:
  Normal:
    label: Normal
    button_color: '#004892'
    text_color: '#ffffff'
    weight: 1.0
    optional: false
    special: false
    always_visible: true
    display_order: 0
    fallback: []
    slug: normal
    form_key: normal
  Notfall:
    label: Notfall
    button_color: '#dc3545'
    text_color: '#ffffff'
    weight: 1.1
    optional: false
    special: false
    always_visible: true
    display_order: 1
    fallback:
      - Normal
    slug: notfall
    form_key: notfall
  Privat:
    label: Privat
    button_color: '#ffc107'
    text_color: '#333333'
    weight: 1.2
    optional: true
    special: false
    always_visible: true
    display_order: 2
    fallback:
      - Notfall
      - - Normal
        - Herz
    slug: privat
    form_key: privat
  Herz:
    label: Herz
    button_color: '#28a745'
    text_color: '#ffffff'
    weight: 1.2
    optional: true
    special: true
    always_visible: false
    display_order: 3
    fallback:
      - - Notfall
        - Normal
    slug: herz
    form_key: herz
  Msk:
    label: Msk
    button_color: '#9c27b0'
    text_color: '#ffffff'
    weight: 0.8
    optional: true
    special: true
    always_visible: false
    display_order: 4
    fallback:
      - Notfall
      - Normal
    slug: msk
    form_key: msk
  Chest:
    label: Chest
    button_color: '#ff9800'
    text_color: '#ffffff'
    weight: 0.8
    optional: true
    special: true
    always_visible: false
    display_order: 5
    fallback:
      - Notfall
      - Normal
    slug: chest
    form_key: chest
balancer:
  enabled: true
  min_assignments_per_skill: 5
  imbalance_threshold_pct: 30
  allow_fallback_on_imbalance: true
  fallback_strategy: skill_priority  # Options: skill_priority, modality_priority, pool_priority
  fallback_chain:
    Normal: []
    Notfall:
      - Normal
    Herz:
      - - Notfall
        - Normal
    Privat:
      - Notfall
      - Normal
    Msk:
      - Notfall
      - Normal
    Chest:
      - Notfall
      - Normal

# Medweb CSV Upload Configuration
medweb_mapping:
  # Rules for mapping medweb activities to modalities and skills
  # Rules are evaluated in order; first match wins
  rules:
    # CT activities
    - match: "CT Spätdienst"
      modality: "ct"
      shift: "Spaetdienst"
      base_skills: {Normal: 1, Notfall: 1, Privat: 0, Herz: 0, Msk: 0, Chest: 0}

    - match: "CT Assistent"
      modality: "ct"
      shift: "Fruehdienst"
      base_skills: {Normal: 1, Notfall: 1, Privat: 0, Herz: 0, Msk: 0, Chest: 0}

    - match: "SBZ: CT Privatpatienten"
      modality: "ct"
      shift: "Fruehdienst"
      base_skills: {Normal: 0, Notfall: 0, Privat: 1, Herz: 0, Msk: 0, Chest: 0}

    # MR activities
    - match: "MRT Spätdienst"
      modality: "mr"
      shift: "Spaetdienst"
      base_skills: {Normal: 1, Notfall: 1, Privat: 0, Herz: 0, Msk: 0, Chest: 0}

    - match: "MR Assistent 1. Monat"
      modality: "mr"
      shift: "Fruehdienst"
      base_skills: {Normal: 1, Notfall: 0, Privat: 0, Herz: 0, Msk: 0, Chest: 0}

    - match: "MR Assistent"
      modality: "mr"
      shift: "Fruehdienst"
      base_skills: {Normal: 1, Notfall: 1, Privat: 0, Herz: 0, Msk: 0, Chest: 0}

    - match: "SBZ: MRT-OA"
      modality: "mr"
      shift: "Fruehdienst"
      base_skills: {Normal: 0, Notfall: 0, Privat: 1, Herz: 0, Msk: 0, Chest: 0}

    # Chir activities → xray modality (per user clarification: chir=xray)
    - match: "Chir Assistent"
      modality: "xray"
      shift: "Fruehdienst"
      base_skills: {Normal: 1, Notfall: 1, Privat: 0, Herz: 0, Msk: 0, Chest: 0}

    - match: "OA / FA Chir"
      modality: "xray"
      shift: "Fruehdienst"
      base_skills: {Normal: 1, Notfall: 1, Privat: 1, Herz: 0, Msk: 0, Chest: 0}

    # Time exclusions (boards, meetings, teaching) - NEW
    # These punch out time from work shifts (worker completely unavailable)
    # Schedule is day-specific (Montag, Dienstag, Mittwoch, Donnerstag, Freitag)
    - match: "Kopf-Hals-Board"
      exclusion: true
      schedule:
        Montag: "15:30-17:00"
      prep_time:
        before: "30m"  # Optional: exclude 15:00-15:30 as prep
        after: "15m"   # Optional: exclude 17:00-17:15 as cleanup

    - match: "Board"
      exclusion: true
      schedule:
        Dienstag: "15:00-17:00"
        Mittwoch: "10:00-12:00"
        Donnerstag: "14:00-16:00"

    - match: "Besprechung"
      exclusion: true
      schedule:
        Montag: "09:00-10:00"
        Mittwoch: "14:00-15:00"
        Freitag: "13:00-14:00"

    - match: "Fortbildung"
      exclusion: true
      schedule:
        Donnerstag: "13:00-15:00"

    - match: "Aufklärung"
      exclusion: true
      schedule:
        Dienstag: "10:00-11:00"
        Donnerstag: "10:00-11:00"

    # SBZ Aufklärung - uses shifts logic
    - match: "SBZ Aufklärung"
      modality: "ct"
      shift: "Fruehdienst"
      label: "Aufklärung"
      base_skills: {Normal: 1, Notfall: 0, Privat: 0, Herz: 0, Msk: 0, Chest: 0}

# Shift time definitions
shift_times:
  Fruehdienst:
    default: "07:00-15:00"
    friday: "07:00-13:00"
  Spaetdienst:
    default: "13:00-21:00"
    friday: "13:00-19:00"

# Worker skill roster - per-worker overrides
# Config takes precedence over medweb mapping
# -1 = excluded (never use), 0 = passive (fallback only), 1 = active (primary + fallback)
worker_skill_roster:
  # Example: MSK specialist
  AAn:  # Alona Anzalone
    default:
      Normal: 1
      Notfall: 1
      Privat: 0
      Herz: 0
      Msk: 1      # MSK specialist
      Chest: 0

  # Example: Chest specialist with CT Notfall only as fallback
  AN:  # Andrea Nedelcu
    default:
      Normal: 1
      Notfall: 1
      Privat: 0
      Herz: 0
      Msk: 0
      Chest: 1    # Chest specialist
    ct:
      Notfall: 0  # Only fallback for CT Notfall

  # Example: Cardiac specialist
  DEMO1:
    default:
      Normal: 1
      Notfall: 1
      Privat: 0
      Herz: 1     # Cardiac specialist
      Msk: 0
      Chest: 0

  # Example: Private patients only (PP role)
  DEMO2:
    default:
      Normal: 0   # Only fallback
      Notfall: 0  # Only fallback
      Privat: 1   # Primary for private patients
      Herz: 0
      Msk: -1     # Never for MSK
      Chest: -1   # Never for Chest

  # Example: First month assistant (no Notfall)
  DEMO3:
    default:
      Normal: 1
      Notfall: 0  # Not allowed for emergencies yet
      Privat: 0
      Herz: 0
      Msk: 0
      Chest: 0
